allprojects { subproject ->
    group = 'com.neva.osgi.toolkit'
    version = '1.0.0'

    repositories {
        jcenter()
    }

    if (subproject.plugins.hasPlugin('org.jetbrains.kotlin.jvm')) {
        compileKotlin {
            kotlinOptions {
                jvmTarget = "1.8"
            }
        }
        compileTestKotlin {
            kotlinOptions {
                jvmTarget = "1.8"
            }
        }
    }

    if (subproject.plugins.hasPlugin('java')) {
        afterEvaluate {
            jar {
                manifest {
                    attributes([
                            'Implementation-Title'  : project.description,
                            'Implementation-Version': project.version
                    ])
                }
            }
        }
    }

    if (subproject.plugins.hasPlugin('maven-publish')) {
        publishing {
            publications {
                mavenJava(MavenPublication) {
                    from components.java
                }
            }
        }
    }
}
